package com.devsecops.webapp.demo;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import static org.junit.jupiter.api.Assertions.*;
import java.util.*;

/**
 * DEMO TEST CLASS - Shows test coverage and quality issues
 */
@SpringBootTest
public class VulnerabilityDemoServiceTest {
    
    private VulnerabilityDemoService demoService = new VulnerabilityDemoService();
    
    @Test
    public void testHashPassword() {
        // Basic test - low coverage
        String result = demoService.hashPassword("test123");
        assertNotNull(result);
        // Missing edge cases, null tests, etc.
    }
    
    @Test
    public void testIsValidAge() {
        // Partial coverage
        assertTrue(demoService.isValidAge(25));
        assertFalse(demoService.isValidAge(15));
        // Missing boundary tests (18, 120, negative numbers)
    }
    
    @Test
    public void testValidateEmail() {
        // Incomplete test
        assertTrue(demoService.validateEmail("test@example.com"));
        // Missing invalid email tests, null tests, ReDoS tests
    }
    
    // CODE SMELL: Commented out test
    /*
    @Test
    public void testGetUserData() {
        // This test is commented out - reduces coverage
        // Should test SQL injection scenarios
    }
    */
    
    @Test
    public void testCalculateTotal() {
        List<Integer> numbers = Arrays.asList(1, 2, 3);
        int result = demoService.calculateTotal(numbers);
        assertEquals(6, result);
        
        // Missing null tests that would reveal the bug
        // List<Integer> nullList = null;
        // demoService.calculateTotal(nullList); // Would throw NPE
    }
    
    // Missing tests for:
    // - readFile() method
    // - processUserData() method  
    // - determineUserLevel() method
    // - getDebugInfo() method
    // - processQueue() method
    
    // This results in low test coverage (~30-40%)
}
